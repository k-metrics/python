---
title: "Basics"
# author: "Sampo Suzuki"
# date: "2019/12/20"
output:
  html_document:
    code_folding: none
    df_print: paged
    highlight: textmate
    md_extensions: -ascii_identifiers
    theme: united
    toc: yes
    toc_float:
      collapsed: yes
      smooth_scroll: no
    self_contained: no
knit: (function(inputFile, encoding) { 
       rmarkdown::render(inputFile,
                         encoding=encoding, 
                         output_dir = "docs/") })
---

<!-- "default", "cerulean", "journal", "flatly", "darkly", "readable", "spacelab", "united", "cosmo", "lumen", "paper", "sandstone", "simplex", "yeti" -->

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, 
                      engine.path = list('/opt/virtualenvs/r-tensorflow'))
```

```{css, include=FALSE}
h1 {border-bottom: solid 2.5px;}
h2 {border-bottom: solid 2.0px;}
h3 {border-bottom: solid 1.5px;}
h4 {border-bottom: solid 1.0px; font-size: smaller;}

/*見出しの最初の文字のみ大きくする
h1:first-letter {font-size: 1.25em;}*/
```

R Markdownではコードチャンクの区分を表示する方法がありませんので、PythonとRの実行コードの区別するために実行結果のプロンプトをPythonとRで変えてあります。Pythonの場合は **`>>`** 、Rの場合は **`##`** となっています。

　  

# 変数
Pythonの変数はRと同様にC言語のような変数宣言をする必要はありません。利用したい変数に直接、値（データ）を代入することで任意の変数が作成できます。例えば整数値をもつ変数は以下のように作成します。

　  

#### *Python*
```{python, comment=">>"}
x = 10
print(x, type(x), sep=", ")
```

　  

#### *R*
```{r}
r <- 10L
print(c(r, class(r)))
```

　  

また、Rと同様に作成した変数を上書きして別のデータを代入することも可能です。先程作成した整数値を代入した変数 `x` に実数（浮動小数点数）を代入すると以下のように変数の値と変数の型が変わることが分かります。

　  

#### *Python*
```{python, comment=">>"}
print(x, type(x), sep=", ")
x = 10.1
print(x, type(x), sep=", ")
```

　  

#### *R*
```{r}
print(c(r, class(r)))
r <- 10.1
print(c(r, class(r)))
```

　  

## Types（型）
変数に代入できるデータにはR言語と同様に型（Type）があります。扱える型（以降、データ型）には以下のようなものがあります。

Type     | Python          | R               | Memo
---------|-----------------|-----------------|---------------------------------
論理型   | `True`, `False` | `TRUE`, `FALSE` | 1/0の真偽型（Boolean）
整数型   | 1, 2, 3, ...    | 1L, 2L, ...     | RはLをつけることで明示的に整数型を示す
実数型   | 1.0, 1.1, ...   | 1, 1.0, ...     | 倍精度浮動小数（64bit）
複素数型 | 1 + 1j, ...     | 1 + 1i, ...     | 
文字型　 | "string"        | "string"        | クォート（シングルまたはダブル）で囲む
日付型   | N/A             | Date, POSIX     | Ptyhonで日付型を扱うにはパッケージ読み込みが必要
バイト型 | バイナリデータ  | N/A             | Ptyhonでは文字列をバイナリ形式として扱える

データ型を確認してみます。

　  

#### *Python*
```{python, comment=">>"}
type(True)
type(1)
type(1.0)
type(1 + 1j)
type("string")
type(b"binary")
```

　  

#### *R*
```{r}
class(TRUE)
class(1L)
class(1.0)
class(1 + 1i)
class(as.Date("2020/1/1"))
class("string")
```

　  

## Container Types（変数型）
データを格納する箱（変数）にはR同様に様々な型があります。変数型はスカラー型とベクトル型に大別できます。スカラー型とは任意のデータが一つだけ入る変数型、ベクトル型は任意のデータが複数入る変数型です。

Type     | Python      | R           | Memo
---------|-------------|-------------|-----------------------------------------
スカラー型 | `bool`, `int`, `float`, `complex`, `str`, `bytes` | N/A | データが一つしか入らない変数型
ベクトル型 | `list`, `tuple`, `dict`, `set` | `c`           | Rの変数は基本的にベクトル型
行列型     | N/A       | `matrix`    | 特殊なベクトル型
配列型     | N/A       | `array`     | 特殊なベクトル型
因子型     | N/A       | `factor, order` | インデックス付きのベクトル型
データフレーム型 | N/A | `data.frame` | 複数の等長ベクトル型の集合
リスト型   | N/A       | `list`       | 複数の不等長ベクトル型の集合

　  

## スカラー型変数
Pythonのスカラー型変数は基本的に変数型と同義と考えてください。ちなみにRではスカラー型変数という概念がありませんので長さ $1$ のベクトル型変数を用います。

　  

### 論理型（真偽型・ブール型・Boolean）
Pythonの論理型は `True`, `False` と頭文字だけ大文字になります。Rや他の言語と同様に `1`, `0` と等価です。

　  

#### *Python*
```{python, comment=">>"}
b = True
print(b, type(b), sep =", ")
b == 1
```

　  

#### *R*
```{r}
B <- TRUE
print(c(B, class(B)))
B == 1
```

　  

### 整数型
Pythonの整数型はRや他の言語と同様です。

　  

#### *Python*
実数を整数に変換する場合には `int` 関数を用います。
```{python, comment=">>"}
i = 1
print(i, type(i), sep =", ")
int(1.6)
```

　  

#### *R*
Rでは整数型は `L` を付与して明示的に指定する必要があります。`L` がない場合は実数型として扱われます。
```{r}
I = 1L
print(c(I, class(I)))
as.integer(1.6)
```

　  

### 実数型（浮動小数点数型）
Pythonの実数型は `float` 型と呼ばれますが、ビット長 $64$ bitの倍精度浮動小数点数です。C言語の `float` 型（単精度浮動小数点数）とは異なります。整数を浮動小数点数に変換すえるには `float` 関数を用います。

　  

#### *Python*
```{python, comment=">>"}
r = 1.1
print(r, type(r), sep =", ")
float(1)
```

なお、少数点がない数値は整数型として扱われます。
```{python, comment=">>"}
r = 1
print(r, type(r), sep =", ")
```

　  

#### *R*
Rでは小数点がなくても実数として扱われます。
```{r}
R = 1
print(c(R, class(R)))
as.double(1L)
```

　  

### 複素数型
複素数型については省略します。

　  

### 文字型（文字列型）
Pythonの文字型はRの文字型と同様にクォート（`'` または `"`）で囲んで指定します。

　  

#### *Python*
```{python, comment=">>"}
s = "string"
print(s, type(s), sep=", ")
```

Rと異なるのは複数行の文字列が指定できる点です。

　  

#### *Python*
```{python, comment=">>"}
s = """multi line string line1
line2
line3"""
print(s, type(s), sep=", ")
```

　  

#### *R*
```{r}
S = "sting"
print(c(S, class(S)))
```

　  

### バイト型
バイト型については省略します。

　  

## ベクトル型変数
ベクトル型変数は、任意の値を複数格納できる変数です。

Type     | Func.   | Operator | Memo 
---------|---------|------|----------------------------------------------------
リスト型 | `list`  | `[]` | 基本となるシーケンシャルなベクトル型
タプル型 | `tuple` | `()` | 値の変更できないリスト型
辞書型   | `dict`  | `{}` | ユニークなキーと値がセットになったベクトル型
集合型   | `set`   | `{}` | ユニークな値のベクトル型

　  

### リスト型（list）
Pythonのリスト型変数は最も基本となるベクトル型の変数です。`list`関数、または、`[]`オペレーターを使って作成します。

　  

#### *Python*
```{python, comment=">>"}
x = [1, 2, 3]
print(x, type(x), sep=", ")
x = list([5, 6, 7, 8])
print(x, type(x), sep=", ")
```

Rと最も異なる点は異なるデータ型を混在できる点です。

　  

#### *Python*
```{python, comment=">>"}
x = [1, 2, "a", 4, 5 + 2j]
print(x, type(x))
```

　  

#### *R*
```{r}
X = c(1L, 2L, 3L)
print(c(X, class(X)))
```

Rの場合、異なるデータを混在した場合、強制型変換が行われ最上位のデータ型に統一されます。

　  

#### *R*
```{r}
X = c(1L, 2, 3 + 5i)
print(c(X, class(X)))
```

　  

### タプル型（tuple）
Pythonのタプル型（`tuple`）はリスト型変数と同様のベクトル型の変数です。`tuple`関数、または、`()`
オペレータを使って作成します。リスト型との違いはデータの変更ができない点です。

#### *Python*
```{python, comment=">>"}
x = (1, 2, 3)
print(x, type(x), sep=", ")
x = tuple((5, 6, 7, 8))
print(x, type(x), sep=", ")
```

　  

### 辞書型（dict）
Pythonの辞書型（`dict`）は、キーと値の組み合わせでデータを管理できるベクトル型変数です。`dict`関数または`{}`オペレータを使って作成します。指定の際は必ず`key:value`の組み合わせで指定します。Rの因子型（factor）に似ていますが、キーはユニークでなければなりません。

　  

#### *Python*
```{python, comment=">>"}
x = {"key1":1, "key2":2, "key3":3}
print(x, type(x), sep=", ")
x = dict({"key1":1, "key2":2, "key3":3, "key4":"key"})
print(x, type(x), sep=", ")
```

　  

#### *R*
Rの因子型はデータからユニークキーを作成します。
```{r}
X = factor(c(1, 2, 3, 1, 5))
X
```

　  

### 集合型（set）
Pythonの集合型（`set`）は、`set`関数または`{}`を使って作成します。重複するデータを指定してもRの因子型変数の`Levels`に相当するユニークなデータを変数に格納します。文字列を指定した場合は一文字つづに分解して格納します。

　  

#### *Python*
```{python, comment=">>"}
x = {4, 2, 3, 1, 1, 5, 2, 1, 1}
print(x, type(x), sep=", ")
x = set("strings")
print(x, type(x), sep=", ")
```

　  

# 演算子

## 単項演算子
単項演算子は文字通り一つの変数に作用する演算子です。Pythonの単項演算子はRと同様にマイナスならびに否定の演算子があります。

Type | Python      | R           | Memo
-----|-------------|-------------|-----------------------------------------
マイナス | `-`     | `-`         | 
否定     | `not()` | `!`         | 

　  

#### *Python*
```{python, comment=">>"}
x = 3
print(-x, type(-x), sep=", ")
not(True)
```

　  

#### *R*

```{r}
x <- 3L
print(c(-x, class(-x)))
!TRUE
```

　  

## 算術演算子（二項演算子）
Pythonの算術演算子にはRの算術演算子と同様に以下の演算子があります。

Type | Python      | R           | Memo
-----|-------------|-------------|-----------------------------------------
加算 | `+`         | `+`         | 
減算 | `-`         | `-`         | 
乗算 | `*`         | `*`         | 
除算 | `/`         | `/`         | 
累乗 | `**`        | `^`         | 
剰余 | `%`         | `%%`        | 
切捨 | `//`        | `%/%`       | 整数商

　  

#### *Python*
```{python, comment=">>"}
1 + 2
2 - 3
3 * 4
5 / 6
6 ** 7
7 % 8
10 // 3
```

　  

#### *R*
```{r}
1 + 2
2 - 3
3 * 4
5 / 6
6 ^ 7
7 %% 8
10 %/% 3
```

　  

## 比較演算子
比較演算子は関係演算子とも呼ばれる二つの変数の関係を調べる演算子です。返り値は論理型になります。

言語   | 大なり | 小なり | 以上 | 以下 | 等しい | 等しくない | Memo
-------|------|------|------|------|------|------|------|----------------------
Python | `>`  | `<`  | `>=` | `<=` | `==` | `!=` | 
R      | `>`  | `<`  | `>=` | `<=` | `==` | `!=` |  

```{python, comment=">>"}
1 > 2
2 < 3
3 >= 4
4 <= 5
5 == 6
6 != 7
```

　  

## 論理演算子

言語   | AND | OR | XOR | NOT | Memo
-------|------|------|------|------|-------------------------------------------
Python | `and` | `or`  | N/A | `not` | 
R      | `&&`  | `||`  | `xor` | `!` | 

　  

#### *Python*
```{python, comment=">>"}
1 and 0
1 or 0
not 0
```

　  

#### *R*
```{r}
1 && 0
1 || 0
xor(1, 0)
!TRUE
```

　  

## 参照演算子（アクセス演算子）
Pythonでベクトル変数の中身（要素）を参照する場合は参照演算子（`[]`）を用います。Rと異なりインデックスは $0$ から始まります。

演算子  | 説明
--------|----------------------------------------------------------------------
[n]     | $n$番目の要素を参照します
[n:m]   | $n$番目から$m-1$番目の要素を参照します
[n:]    | $n$番目以降の要素を参照します
[:m]    | $m-1$番目までの要素を参照します
[n:m:s] | $n$番目から$m-1$番目の要素を$s$ごとに参照します

　  

#### *Python*
```{python, comment=">>"}
x = list([1, 2, 3, 4, 5, 6, 7, 8, 9, 0])
x
x[0]
x[0:3]
x[5:]
x[:4]
x[0:10:2]
```

　  

#### *R*
Rでも同様の参照が可能です。
```{r}
X <- c(1:9, 0)
X
X[1]
X[1:3]
```
